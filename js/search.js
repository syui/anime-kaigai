var lunrIndex,$results,pagesIndex;function initLunr(){$.getJSON("/bower_components/lunr.js/PagesIndex.json").done(function(index){pagesIndex=index;lunrIndex=lunr(function(){this.field("title",{boost:10});this.field("tags",{boost:5});this.field("content");this.ref("href");});pagesIndex.forEach(function(page){lunrIndex.add(page);});}).fail(function(jqxhr,textStatus,error){var err=textStatus+", "+error;console.error("Error getting Hugo index flie:",err);});}function initUI(){$results=$("#results");$("#search").keyup(function(){$results.empty();var query=$(this).val();if(query.length<2){return;}var results=search(query);renderResults(results);});}function search(query){return lunrIndex.search(query).map(function(result){return pagesIndex.filter(function(page){return page.href===result.ref;})[0];});}function renderResults(results){if(!results.length){return;}results.slice(0,10).forEach(function(result){var $result=$("<li>");$result.append($("<a>",{href:result.href,text:"Â» "+result.title}));$results.append($result);});}initLunr();$(document).ready(function(){initUI();});